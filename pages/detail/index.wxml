<!-- å°çº¢ä¹¦é£æ ¼è¯¦æƒ…é¡µé¢ -->
<view class="detail-page">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar">
    <view class="nav-left" bindtap="goBack">
      <text style="font-size: 32rpx; color: #333;">â†</text>
    </view>
    <view class="nav-actions">
      <view class="nav-btn" bindtap="onShare">
        <text style="font-size: 24rpx;">ğŸ“¤</text>
      </view>
      <view class="nav-btn" bindtap="onMore">
        <text style="font-size: 24rpx;">â‹¯</text>
      </view>
    </view>
  </view>

  <!-- å›¾ç‰‡è½®æ’­åŒºåŸŸ -->
  <view class="image-section">
    <swiper 
      class="image-swiper" 
      indicator-dots="{{images.length > 1}}"
      indicator-color="rgba(255,255,255,0.5)"
      indicator-active-color="#fff"
      circular="{{true}}"
      autoplay="{{false}}"
    >
      <swiper-item wx:for="{{images}}" wx:key="index">
        <image 
          class="detail-image" 
          src="{{item}}" 
          mode="aspectFill"
          bindtap="previewImage"
          data-index="{{index}}"
        />
      </swiper-item>
    </swiper>
    
    <!-- å›¾ç‰‡è®¡æ•°å™¨ -->
    <view class="image-counter" wx:if="{{images.length > 1}}">
      <text>{{currentImageIndex + 1}}/{{images.length}}</text>
    </view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content-section">
    <!-- æ ‡é¢˜å’Œæè¿° -->
    <view class="content-header">
      <text class="content-title">{{workInfo.title}}</text>
      <text class="content-desc">{{workInfo.description}}</text>
    </view>

    <!-- æ ‡ç­¾åŒºåŸŸ -->
    <view class="tags-section" wx:if="{{workInfo.tags.length > 0}}">
      <view class="tag-item" wx:for="{{workInfo.tags}}" wx:key="index">
        <text>#{{item}}</text>
      </view>
    </view>

    <!-- æ‹æ‘„ä¿¡æ¯ -->
    <view class="shooting-info" wx:if="{{workInfo.shootingInfo}}">
      <view class="info-title">ğŸ“· æ‹æ‘„ä¿¡æ¯</view>
      <view class="info-grid">
        <view class="info-item" wx:if="{{workInfo.shootingInfo.camera}}">
          <text class="info-label">ç›¸æœº</text>
          <text class="info-value">{{workInfo.shootingInfo.camera}}</text>
        </view>
        <view class="info-item" wx:if="{{workInfo.shootingInfo.lens}}">
          <text class="info-label">é•œå¤´</text>
          <text class="info-value">{{workInfo.shootingInfo.lens}}</text>
        </view>
        <view class="info-item" wx:if="{{workInfo.shootingInfo.aperture}}">
          <text class="info-label">å…‰åœˆ</text>
          <text class="info-value">{{workInfo.shootingInfo.aperture}}</text>
        </view>
        <view class="info-item" wx:if="{{workInfo.shootingInfo.shutter}}">
          <text class="info-label">å¿«é—¨</text>
          <text class="info-value">{{workInfo.shootingInfo.shutter}}</text>
        </view>
        <view class="info-item" wx:if="{{workInfo.shootingInfo.iso}}">
          <text class="info-label">ISO</text>
          <text class="info-value">{{workInfo.shootingInfo.iso}}</text>
        </view>
        <view class="info-item" wx:if="{{workInfo.location}}">
          <text class="info-label">åœ°ç‚¹</text>
          <text class="info-value">{{workInfo.location}}</text>
        </view>
      </view>
    </view>

    <!-- ä½œè€…ä¿¡æ¯ -->
    <view class="author-section">
      <view class="author-info" bindtap="viewProfile">
        <image class="author-avatar" src="{{workInfo.author.avatar}}" />
        <view class="author-details">
          <text class="author-name">{{workInfo.author.name}}</text>
          <text class="author-desc">{{workInfo.author.description}}</text>
        </view>
        <view class="follow-btn {{workInfo.author.isFollowed ? 'followed' : ''}}" bindtap="toggleFollow">
          <text>{{workInfo.author.isFollowed ? 'å·²å…³æ³¨' : 'å…³æ³¨'}}</text>
        </view>
      </view>
    </view>

    <!-- äº’åŠ¨ç»Ÿè®¡ -->
    <view class="interaction-stats">
      <view class="stat-item">
        <text class="stat-icon">ğŸ‘ï¸</text>
        <text class="stat-text">{{workInfo.viewCount}}æ¬¡æµè§ˆ</text>
      </view>
      <view class="stat-item">
        <text class="stat-icon">â¤ï¸</text>
        <text class="stat-text">{{workInfo.likeCount}}ä¸ªèµ</text>
      </view>
      <view class="stat-item">
        <text class="stat-icon">ğŸ’¬</text>
        <text class="stat-text">{{workInfo.commentCount}}æ¡è¯„è®º</text>
      </view>
      <view class="stat-item">
        <text class="stat-icon">â­</text>
        <text class="stat-text">{{workInfo.collectCount}}æ¬¡æ”¶è—</text>
      </view>
    </view>

    <!-- è¯„è®ºåŒºåŸŸ -->
    <view class="comments-section">
      <view class="comments-header">
        <text class="comments-title">è¯„è®º ({{comments.length}})</text>
      </view>
      
      <view class="comment-list">
        <view class="comment-item" wx:for="{{comments}}" wx:key="id">
          <image class="comment-avatar" src="{{item.user.avatar}}" />
          <view class="comment-content">
            <view class="comment-header">
              <text class="comment-user">{{item.user.name}}</text>
              <text class="comment-time">{{item.timeAgo}}</text>
            </view>
            <text class="comment-text">{{item.content}}</text>
            <view class="comment-actions">
              <view class="comment-like {{item.isLiked ? 'liked' : ''}}" bindtap="likeComment" data-id="{{item.id}}">
                <text class="like-icon">{{item.isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
                <text class="like-count">{{item.likeCount}}</text>
              </view>
              <view class="comment-reply" bindtap="replyComment" data-id="{{item.id}}">
                <text>å›å¤</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-actions">
    <view class="action-left">
      <input class="comment-input" placeholder="å†™è¯„è®º..." bindtap="showCommentModal" />
    </view>
    <view class="action-right">
      <view class="action-btn like-action {{workInfo.isLiked ? 'liked' : ''}}" bindtap="toggleLike">
        <text class="action-icon">{{workInfo.isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        <text class="action-text">{{workInfo.likeCount}}</text>
      </view>
      <view class="action-btn collect-action {{workInfo.isCollected ? 'collected' : ''}}" bindtap="toggleCollect">
        <text class="action-icon">{{workInfo.isCollected ? 'â­' : 'â˜†'}}</text>
        <text class="action-text">æ”¶è—</text>
      </view>
      <view class="action-btn share-action" bindtap="onShare">
        <text class="action-icon">ğŸ“¤</text>
        <text class="action-text">åˆ†äº«</text>
      </view>
    </view>
  </view>
</view>
